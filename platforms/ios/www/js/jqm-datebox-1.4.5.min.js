!function(e){e.widget("mobile.datebox",{initSelector:"input[data-role='datebox']",options:{version:"3-1.4.5-01",theme:!1,themeDefault:"a",themeHeader:"a",themeSetButton:"a",mode:!1,transition:"fade",useAnimation:!0,hideInput:!1,hideContainer:!1,lockInput:!0,zindex:"1100",clickEvent:"vclick",clickEventAlt:"click",defaultValue:!1,showInitialValue:!1,popupPosition:!1,popupForceX:!1,popupForceY:!1,useModal:!0,useModalTheme:"b",useInline:!1,useInlineBlind:!1,useHeader:!0,useImmediate:!1,useButton:!0,buttonIcon:!1,buttonIconDate:"calendar",buttonIconTime:"clock",useFocus:!1,useClearButton:!1,useCollapsedBut:!1,usePlaceholder:!1,beforeOpenCallback:!1,beforeOpenCallbackArgs:[],openCallback:!1,openCallbackArgs:[],closeCallback:!1,closeCallbackArgs:[],startOffsetYears:!1,startOffsetMonths:!1,startOffsetDays:!1,afterToday:!1,beforeToday:!1,notToday:!1,maxDays:!1,minDays:!1,maxYear:!1,minYear:!1,blackDates:!1,blackDatesRec:!1,blackDays:!1,whiteDates:!0,minHour:!1,maxHour:!1,minuteStep:1,minuteStepRound:0,rolloverMode:{m:!0,d:!0,h:!0,i:!0,s:!0},useLang:"default",lang:{"default":{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",calTodayButtonLabel:"Jump to Today",calTomorrowButtonLabel:"Jump to Tomorrow",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",useArabicIndic:!1,isRTL:!1,calStartDay:0,clearButton:"Clear",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y"}}},_enhanceDate:function(){e.extend(this._date.prototype,{copy:function(t,a){return t=e.extend([0,0,0,0,0,0,0],t),a=e.extend([0,0,0,0,0,0,0],a),new Date(a[0]>0?a[0]:this.get(0)+t[0],a[1]>0?a[1]:this.get(1)+t[1],a[2]>0?a[2]:this.get(2)+t[2],a[3]>0?a[3]:this.get(3)+t[3],a[4]>0?a[4]:this.get(4)+t[4],a[5]>0?a[5]:this.get(5)+t[5],a[6]>0?a[5]:this.get(6)+t[6])},adj:function(e,t){if("number"!=typeof t||"number"!=typeof e)throw new Error("Invalid Arguments");switch(e){case 0:this.setD(0,this.get(0)+t);break;case 1:this.setD(1,this.get(1)+t);break;case 2:this.setD(2,this.get(2)+t);break;case 3:t*=60;case 4:t*=60;case 5:t*=1e3;case 6:this.setTime(this.getTime()+t)}return this},setD:function(e,t){switch(e){case 0:this.setFullYear(t);break;case 1:this.setMonth(t);break;case 2:this.setDate(t);break;case 3:this.setHours(t);break;case 4:this.setMinutes(t);break;case 5:this.setSeconds(t);break;case 6:this.setMilliseconds(t)}return this},get:function(e){switch(e){case 0:return this.getFullYear();case 1:return this.getMonth();case 2:return this.getDate();case 3:return this.getHours();case 4:return this.getMinutes();case 5:return this.getSeconds();case 6:return this.getMilliseconds()}return!1},get12hr:function(){return 0===this.get(3)?12:this.get(3)<13?this.get(3):this.get(3)-12},iso:function(){var e=[0,0,0],t=0;for(t=0;3>t;t++)e[t]=this.get(t),1===t&&e[t]++,e[t]<10&&(e[t]="0"+String(e[t]));return e.join("-")},comp:function(){return parseInt(this.iso().replace(/-/g,""),10)},getEpoch:function(){return Math.floor(this.getTime()/1e3)},getArray:function(){var e=[0,0,0,0,0,0],t=0;for(t=0;6>t;t++)e[t]=this.get(t);return e},setFirstDay:function(e){return this.setD(2,1).adj(2,e-this.getDay()),this.get(2)>10&&this.adj(2,7),this},setDWeek:function(e,t){return 4===e?this.setD(1,0).setD(2,1).setFirstDay(4).adj(2,-3).adj(2,7*(t-1)):this.setD(1,0).setD(2,1).setFirstDay(e).adj(2,7*(t-1))},getDWeek:function(e){var t,a;switch(e){case 0:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(0),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 1:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(1),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 4:return 11===this.getMonth()&&this.getDate()>28?1:(t=this.copy([0,-1*this.getMonth()],!0).setFirstDay(4).adj(2,-3),a=Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1,1>a?(t=this.copy([-1,-1*this.getMonth()]).setFirstDay(4).adj(2,-3),Math.floor((this.getTime()-t.getTime())/6048e5)+1):a);default:return 0}}})},_event:function(t,a){var n,o=e(this).data("mobile-datebox");if(!t.isPropagationStopped())switch(a.method){case"close":o.close();break;case"open":o.open();break;case"set":"object"==typeof a.value?(o.theDate=a.value,o._t({method:"doset"})):(e(this).val(a.value),e(this).trigger("change"));break;case"doset":n="_"+o.options.mode+"DoSet",e.isFunction(o[n])?o[n].apply(o,[]):o._t({method:"set",value:o._formatter(o.__fmt(),o.theDate),date:o.theDate});break;case"dooffset":a.type&&o._offset(a.type,a.amount,!0);break;case"dorefresh":o.refresh();break;case"doclear":e(this).val("").trigger("change");break;case"clear":e(this).trigger("change")}},_ord:{"default":function(e){var t=e%10;return e>9&&21>e||t>3?"th":["th","st","nd","rd"][t]}},_dur:function(t){var a=[t/864e5,t/36e5%24,t/6e4%60,t/1e3%60];return e.each(a,function(e,t){a[e]=parseInt(t,10)}),a},_gridblk:{g:[0,0,"a","b","c","d","e"],b:["a","b","c","d","e","f"]},__:function(e){var t=this.options,a=t.lang[t.useLang],n=t[t.mode+"lang"],o="override"+e.charAt(0).toUpperCase()+e.slice(1);return"undefined"!=typeof t[o]?t[o]:"undefined"!=typeof a[e]?a[e]:"undefined"!=typeof n&&"undefined"!=typeof n[e]?n[e]:t.lang["default"][e]},__fmt:function(){var e=this,t=this.options;if("undefined"!=typeof e.fmtOver&&e.fmtOver!==!1)return e.fmtOver;switch(t.mode){case"timebox":case"timeflipbox":return e.__("timeOutput");case"durationbox":case"durationflipbox":return e.__("durationFormat");default:return e.__("dateFormat")}},_zPad:function(e,t){return"undefined"!=typeof t&&"-"===t?String(e):(10>e?"0":"")+String(e)},_dRep:function(e,t){var a,n,o=48,i=57,r=1584,s="";for(-1===t&&(o+=r,i+=r,r=-1584),n=0;n<e.length;n++)a=e.charCodeAt(n),s+=String.fromCharCode(a>=o&&i>=a?a+r:a);return s},_doIndic:function(){var t=this;t.d.intHTML.find("*").each(function(){e(this).children().length<1?e(this).text(t._dRep(e(this).text())):e(this).hasClass("ui-datebox-slideday")&&e(this).html(t._dRep(e(this).html()))}),t.d.intHTML.find("input").each(function(){e(this).val(t._dRep(e(this).val()))})},_parser:{"default":function(){return!1}},_n:function(e,t){return 0>e?t:e},_pa:function(e,t){return"boolean"==typeof t?new this._date(e[0],e[1],e[2],0,0,0,0):new this._date(t.get(0),t.get(1),t.get(2),e[0],e[1],e[2],0)},_makeDate:function(t){var a,n,o,i,r=this,s=this.options,d=this.options.defaultValue,u=r.__fmt(),l=null,c=[],p=new r._date,h={year:-1,mont:-1,date:-1,hour:-1,mins:-1,secs:-1,week:!1,wtyp:4,wday:!1,yday:!1,meri:0};if(t=e.trim(r.__("useArabicIndic")===!0?r._dRep(t,-1):t),"undefined"==typeof s.mode)return p;if("undefined"!=typeof r._parser[s.mode])return r._parser[s.mode].apply(r,[t]);if("durationbox"===s.mode||"durationflipbox"===s.mode){if(u=u.replace(/%D([a-z])/gi,function(e,t){switch(t){case"d":case"l":case"M":case"S":return"("+e+"|[0-9]+)";default:return".+?"}}),u=new RegExp("^"+u+"$"),l=u.exec(t),o=u.exec(r.__fmt()),null===l||l.length!==o.length)return new r._date("number"==typeof d&&d>0?1e3*(r.initDate.getEpoch()+parseInt(d,10)):r.initDate.getTime());for(n=r.initDate.getEpoch(),a=1;a<l.length;a++)i=parseInt(l[a],10),o[a].match(/^%Dd$/i)&&(n+=86400*i),o[a].match(/^%Dl$/i)&&(n+=3600*i),o[a].match(/^%DM$/i)&&(n+=60*i),o[a].match(/^%DS$/i)&&(n+=i);return new r._date(1e3*n)}if(u=u.replace(/%(0|-)*([a-z])/gi,function(e,t,a){switch(c.push(a),a){case"p":case"P":case"b":case"B":return"("+e+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"V":case"U":case"u":case"W":case"d":return"("+e+"|[0-9]{"+("-"===t?"1,":"")+"2})";case"j":return"("+e+"|[0-9]{3})";case"s":return"("+e+"|[0-9]+)";case"g":case"y":return"("+e+"|[0-9]{2})";case"E":case"G":case"Y":return"("+e+"|[0-9]{1,4})";default:return c.pop(),".+?"}}),u=new RegExp("^"+u+"$"),l=u.exec(t),o=u.exec(r.__fmt()),null===l||l.length!==o.length){if(d!==!1)switch(typeof d){case"object":e.isFunction(d.getDay)?p=d:3===d.length&&(p=r._pa(d,"time"===s.mode.substr(0,4)?p:!1));break;case"number":p=new r._date(1e3*d);break;case"string":"time"===s.mode.substr(0,4)?(n=e.extend([0,0,0],d.split(":")).slice(0,3),p=r._pa(n,p)):(n=e.extend([0,0,0],d.split("-")).slice(0,3),n[1]--,p=r._pa(n,!1))}isNaN(p.getDate())&&(p=new r._date)}else{for(a=1;a<l.length;a++)switch(i=parseInt(l[a],10),c[a-1]){case"s":return new r._date(1e3*parseInt(l[a],10));case"Y":case"G":h.year=i;break;case"E":h.year=i-543;break;case"y":case"g":h.year=s.afterToday||38>i?2e3+i:1900+i;break;case"m":h.mont=i-1;break;case"d":h.date=i;break;case"H":case"k":case"I":case"l":h.hour=i;break;case"M":h.mins=i;break;case"S":h.secs=i;break;case"u":h.wday=i-1;break;case"w":h.wday=i;break;case"j":h.yday=i;break;case"V":h.week=i,h.wtyp=4;break;case"U":h.week=i,h.wtyp=0;break;case"W":h.week=i,h.wtyp=1;break;case"p":case"P":i=new RegExp("^"+l[a]+"$","i"),h.meri=i.test(r.__("meridiem")[0])?-1:1;break;case"b":n=e.inArray(l[a],r.__("monthsOfYearShort")),n>-1&&(h.mont=n);break;case"B":n=e.inArray(l[a],r.__("monthsOfYear")),n>-1&&(h.mont=n)}if(0!==h.meri&&(-1===h.meri&&12===h.hour&&(h.hour=0),1===h.meri&&12!==h.hour&&(h.hour=h.hour+12)),p=new r._date(r._n(h.year,0),r._n(h.mont,0),r._n(h.date,1),r._n(h.hour,0),r._n(h.mins,0),r._n(h.secs,0),0),h.year<100&&-1!==h.year&&p.setFullYear(h.year),h.mont>-1&&h.date>-1||h.hour>-1&&h.mins>-1&&h.secs>-1)return p;h.week!==!1&&(p.setDWeek(h.wtyp,h.week),h.date>-1&&p.setDate(h.date)),h.yday!==!1&&p.setD(1,0).setD(2,1).adj(2,h.yday-1),h.wday!==!1&&p.adj(2,h.wday-p.getDay())}return p},_customformat:{"default":function(){return!1}},_formatter:function(e,t){var a,n=this,o=this.options,i=0;return"dura"===o.mode.substr(0,4)&&(i=n._dur(this.theDate.getTime()-this.initDate.getTime()),e.match(/%Dd/)||(i[1]+=24*i[0]),e.match(/%Dl/)||(i[2]+=60*i[1]),e.match(/%DM/)||(i[3]+=60*i[2])),e=e.replace(/%(D|X|0|-)*([1-9a-zA-Z])/g,function(e,r,s){if("X"===r)return"undefined"!=typeof n._customformat[o.mode]?n._customformat[o.mode](s,t,o):e;if("D"===r)switch(s){case"d":return i[0];case"l":return n._zPad(i[1]);case"M":return n._zPad(i[2]);case"S":return n._zPad(i[3]);case"A":return n.__("durationDays")[1===i[0]?0:1];default:return e}switch(s){case"a":return n.__("daysOfWeekShort")[t.getDay()];case"A":return n.__("daysOfWeek")[t.getDay()];case"b":return n.__("monthsOfYearShort")[t.getMonth()];case"B":return n.__("monthsOfYear")[t.getMonth()];case"C":return parseInt(t.getFullYear()/100);case"d":return n._zPad(t.getDate(),r);case"H":case"k":return n._zPad(t.getHours(),r);case"I":case"l":return n._zPad(t.get12hr(),r);case"m":return n._zPad(t.getMonth()+1,r);case"M":return n._zPad(t.getMinutes(),r);case"p":case"P":return a=n.__("meridiem")[t.get(3)<12?0:1].toUpperCase(),"P"===s?a.toLowerCase():a;case"s":return t.getEpoch();case"S":return n._zPad(t.getSeconds(),r);case"u":return n._zPad(t.getDay()+1,r);case"w":return t.getDay();case"y":return n._zPad(t.getFullYear()%100);case"Y":return t.getFullYear();case"E":return t.getFullYear()+543;case"V":return n._zPad(t.getDWeek(4),r);case"U":return n._zPad(t.getDWeek(0),r);case"W":return n._zPad(t.getDWeek(1),r);case"o":return"undefined"!=typeof n._ord[o.useLang]?n._ord[o.useLang](t.getDate()):n._ord["default"](t.getDate());case"j":return a=new Date(t.getFullYear(),0,1),a="000"+String(Math.ceil((t-a)/864e5)+1),a.slice(-3);case"G":return a=t.getFullYear(),1===t.getDWeek(4)&&t.getMonth()>0?a+1:t.getDWeek(4)>51&&t.getMonth()<11?a-1:a;case"g":return a=t.getFullYear%100,1===t.getDWeek(4)&&t.getMonth()>0&&++a,t.getDWeek(4)>51&&t.getMonth()<11&&--a,n._zpad(a);default:return e}}),n.__("useArabicIndic")===!0&&(e=n._dRep(e)),e},_btwn:function(e,t,a){return e>t&&a>e},_minStepFix:function(){var e=this.theDate.get(4),t=this.options.minuteStep,a=this.options.minStepRound,n=e%t;t>1&&n>0&&(0>a?e-=n:a>0?e+=t-n:t/2>e%t?e-=n:e+=t-n,this.theDate.setMinutes(e))},_offset:function(t,a,n){var o=this,i=this.options,r=this.theDate,s=!1;if(t=(t||"").toLowerCase(),"undefined"==typeof n&&(n=!0),"a"===t||"undefined"!=typeof i.rolloverMode[t]&&i.rolloverMode[t]!==!0)switch(t){case"y":s=0;break;case"m":o._btwn(r.get(1)+a,-1,12)&&(s=1);break;case"d":o._btwn(r.get(2)+a,0,32-r.copy([0],[0,0,32,13]).get(3)+1)&&(s=2);break;case"h":o._btwn(r.get(3)+a,-1,24)&&(s=3);break;case"i":o._btwn(r.get(4)+a,-1,60)&&(s=4);break;case"s":o._btwn(r.get(5)+a,-1,60)&&(s=5);break;case"a":o._offset("h",12*(a>0?1:-1),!1)}else s=e.inArray(t,["y","m","d","h","i","s"]);s!==!1&&o.theDate.adj(s,a),n===!0&&o.refresh(),i.useImmediate&&o._t({method:"doset"}),o._t({method:"offset",type:t,amount:a,newDate:o.theDate})},_startOffset:function(e){var t=this.options;return t.startOffsetYears!==!1&&e.adj(0,t.startOffsetYears),t.startOffsetMonths!==!1&&e.adj(1,t.startOffsetMonths),t.startOffsetDays!==!1&&e.adj(2,t.startOffsetDays),e},_destroy:function(){var t=this,a=this.options,n=this.d.wrap.find("a");t.d.wrap.removeClass("ui-input-has-clear"),n.remove(),a.lockInput&&t.d.input.removeAttr("readonly"),t.d.input.off("datebox").off("focus.datebox").off("blur.datebox").off("change.datebox"),e(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA)},_create:function(){e(document).trigger("dateboxcreate");var t=this,a=e.extend(this.options,this._getLongOptions(this.element),this.element.data("options")),n=a.theme===!1?e.mobile.getInheritedTheme(this.element):a.theme,o=a.useAnimation?a.transition:"none",i={input:this.element,wrap:this.element.parent(),mainWrap:e("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden "+o+" ui-body-"+n}).css("zIndex",a.zindex),intHTML:!1},r=".datebox"+this.uuid,s="undefined"!=typeof window.ontouchstart,d={eStart:(s?"touchstart":"mousedown")+r,eMove:(s?"touchmove":"mousemove")+r,eEnd:(s?"touchend":"mouseup")+r,eEndA:s?["mouseup","touchend","touchcanel","touchmove"].join(r+" ")+r:"mouseup"+r,move:!1,start:!1,end:!1,pos:!1,target:!1,delta:!1,tmp:!1};e.extend(t,{d:i,drag:d,touch:s}),a.usePlaceholder!==!1&&(a.usePlaceholder===!0&&""!==t._grabLabel()&&t.d.input.attr("placeholder",t._grabLabel()),"string"==typeof a.usePlaceholder&&t.d.input.attr("placeholder",a.usePlaceholder)),a.theme=n,t.disabled=!1,t.runButton=!1,t._date=window.Date,t._enhanceDate(),t.baseID=t.d.input.attr("id"),t.initDate=new t._date,t.initDate.setMilliseconds(0),t.theDate=a.defaultValue?t._makeDate():""!==t.d.input.val()?t._makeDate(t.d.input.val()):new t._date,""===t.d.input.val()&&t._startOffset(t.theDate),t.initDone=!1,a.showInitialValue&&t.d.input.val(t._formatter(t.__fmt(),t.theDate)),a.useButton&&a.mode!==!1&&(t.d.wrap.addClass("ui-input-has-clear"),a.buttonIcon===!1&&(a.buttonIcon="time"===a.mode.substr(0,4)||"dur"===a.mode.substr(0,3)?a.buttonIconTime:a.buttonIconDate),e("<a href='#' class='ui-input-clear ui-btn ui-icon-"+a.buttonIcon+" ui-btn-icon-notext ui-corner-all'></a>").attr("title",t.__("tooltip")).text(t.__("tooltip")).appendTo(t.d.wrap).on(a.clickEvent,function(e){e.preventDefault(),a.useFocus?t.d.input.focus():t.disabled||t._t({method:"open"})})),a.hideInput&&t.d.wrap.hide(),a.hideContainer&&t.d.wrap.parent().hide(),t.d.input.on("focus.datebox",function(){t.d.input.addClass("ui-focus"),t.disabled===!1&&a.useFocus&&t._t({method:"open"})}).on("blur.datebox",function(){t.d.input.removeClass("ui-focus")}).on("change.datebox",function(){t.theDate=t._makeDate(t.d.input.val()),t.refresh()}).on("datebox",t._event),a.lockInput&&t.d.input.attr("readonly","readonly"),"undefined"!=typeof e.event.special.mousewheel&&(t.wheelExists=!0),t.d.input.is(":disabled")&&t.disable(),t.applyMinMax(!1,!1),(a.useInline||a.useInlineBlind)&&t.open(),e(document).trigger("dateboxaftercreate")},applyMinMax:function(e,t){var a,n,o,i,r=this,s=this.options,d=new this._date,u=864e5;a=r._pa([0,0,0],d),"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0),t!==!0&&s.minDays!==!1||"undefined"==typeof r.d.input.attr("min")||(n=r.d.input.attr("min").split("-"),o=new r._date(n[0],n[1]-1,n[2],0,0,0,0),i=(o.getTime()-a.getTime())/u,s.minDays=parseInt(-1*i,10)+0),t!==!0&&s.maxDays!==!1||"undefined"==typeof r.d.input.attr("max")||(n=r.d.input.attr("max").split("-"),o=new r._date(n[0],n[1]-1,n[2],0,0,0,0),i=(o.getTime()-a.getTime())/u,s.maxDays=parseInt(i,10)-1),e===!0&&r._t({method:"refresh"})},_build:{"default":function(){this.d.headerText="Error",this.d.intHTML!==!1&&this.d.intHTML.remove().empty(),this.d.intHTML=e("<div class='ui-body-b'><h2 style='text-align:center'>Unknown Mode</h2></div>")}},_drag:{"default":function(){return!1}},open:function(){var t=this,a=this.options,n={transition:a.useAnimation?a.transition:"none"},o={history:!1,transition:a.useAnimation?a.transition:"none"};if(a.useFocus&&t.fastReopen===!0)return t.d.input.blur(),!1;if(t.theDate=t._makeDate(t.d.input.val()),""===t.d.input.val()&&t._startOffset(t.theDate),t.d.input.blur(),"undefined"==typeof t._build[a.mode]?t._build["default"].apply(t,[]):t._build[a.mode].apply(t,[]),"undefined"!=typeof t._drag[a.mode]&&t._drag[a.mode].apply(t,[]),t._t({method:"refresh"}),t.__("useArabicIndic")===!0&&t._doIndic(),(a.useInline||a.useInlineBlind)&&t.initDone===!1){if(t.d.mainWrap.append(t.d.intHTML),a.hideContainer?(a.useHeader&&t.d.mainWrap.prepend(e("<div class='ui-header ui-bar-"+a.themeHeader+"'><h1 class='ui-title'>"+t.d.headerText+"</h1></div>")),t.d.wrap.parent().after(t.d.mainWrap)):t.d.wrap.parent().append(t.d.mainWrap),t.d.mainWrap.removeClass("ui-datebox-hidden ui-overlay-shadow"),a.useInline)return t.d.mainWrap.addClass("ui-datebox-inline"),a.hideInput||a.hideContainer||t.d.mainWrap.addClass("ui-datebox-inline-has-input"),setTimeout(function(e){return function(){e._t({method:"postrefresh"})}}(t),100),!0;t.d.mainWrap.addClass("ui-datebox-inline ui-datebox-inline-has-input"),t.d.mainWrap.hide(),t.initDone=!1,t._t({method:"postrefresh"})}return a.useInlineBlind?(t.initDone?(t.refresh(),t.d.mainWrap.slideDown(),t._t({method:"postrefresh"})):t.initDone=!0,!0):t.d.intHTML.is(":visible")?!1:(t.d.mainWrap.empty(),a.useHeader&&(t.d.mainWrap.append(e("<a href='#'>Close</a>").addClass("ui-btn-left ui-link ui-btn ui-btn-a ui-icon-delete ui-btn-icon-notext ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t._t({method:"close"})})),t.d.mainWrap.append(e("<div class='ui-header ui-bar-"+a.themeHeader+"'><h1 class='ui-title'>"+t.d.headerText+"</h1></div>"))),t.d.mainWrap.append(t.d.intHTML).css("zIndex",a.zindex),t._t({method:"postrefresh"}),n.positionTo=a.popupPosition!==!1?a.popupPosition:"undefined"!=typeof t.baseID?"#"+t.baseID:"window",a.popupForceX!==!1&&a.popupForceY!==!1&&(n.x=parseInt(a.popupForceX,10),n.y=parseInt(a.popupForceY,10),n.positionTo="origin"),a.useModal&&(o.overlayTheme=a.useModalTheme,o.dismissible=!1),a.openCallback!==!1?(e.isFunction(a.openCallback)||"function"==typeof window[a.openCallback]&&(a.openCallback=window[a.openCallback]),o.afteropen=function(){t._t({method:"postrefresh"}),a.openCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.openCallbackArgs))===!1&&t._t({method:"close"})}):o.afteropen=function(){t._t({method:"postrefresh"})},a.closeCallback!==!1&&(e.isFunction(a.closeCallback)||"function"==typeof window[a.closeCallback]&&(a.closeCallback=window[a.closeCallback]),o.afterclose=function(){a.closeCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.closeCallbackArgs))}),a.beforeOpenCallback!==!1&&(e.isFunction(a.beforeOpenCallback)||"function"==typeof window[a.beforeOpenCallback]&&(a.beforeOpenCallback=window[a.beforeOpenCallback]),a.beforeOpenCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.beforeOpenCallbackArgs))===!1)?!1:void t.d.mainWrap.removeClass("ui-datebox-hidden").popup(o).popup("open",n))},close:function(){var t=this,a=this.options;return a.useInlineBlind?(t.d.mainWrap.slideUp(),!0):a.useInline||t.d.intHTML===!1?!0:(t.d.mainWrap.popup("close"),e(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA),void(a.useFocus&&(t.fastReopen=!0,setTimeout(function(e){return function(){e.fastReopen=!1}}(t),300))))},refresh:function(){var e=this,t=this.options;"undefined"==typeof e._build[t.mode]?e._build["default"].apply(e,[]):e._build[t.mode].apply(e,[]),e.__("useArabicIndic")===!0&&e._doIndic(),e.d.mainWrap.append(e.d.intHTML),e._t({method:"postrefresh"})},_check:function(){var t,a,n,o,i,r=this,s=this.options,d=this.theDate;if(r.dateOK=!0,"undefined"==typeof s.mode)return!0;if(s.afterToday&&(t=new r._date,t>d&&(d=t)),s.beforeToday&&(t=new r._date,d>t&&(d=t)),s.maxDays!==!1&&(t=new r._date,t.adj(2,s.maxDays),d>t&&(d=t)),s.minDays!==!1&&(t=new r._date,t.adj(2,-1*s.minDays),t>d&&(d=t)),s.minHour!==!1&&d.get(3)<s.minHour&&d.setD(3,s.minHour),s.maxHour!==!1&&d.get(3)>s.maxHour&&d.setD(3,s.maxHour),s.maxYear!==!1&&(t=new r._date(s.maxYear,11,31),d>t&&(d=t)),s.minYear!==!1&&(t=new r._date(s.minYear,0,1),t>d&&(d=t)),"time"===s.mode.substr(0,4)||"dur"===s.mode.substr(0,3))"timeflipbox"===s.mode&&s.validHours!==!1&&e.inArray(d.get(3),s.validHours)<0&&(r.dateOK=!1);else{if(s.blackDatesRec!==!1)for(a=d.get(0),n=d.get(1),o=d.get(2),i=0;i<s.blackDatesRec.length;i++)-1!==s.blackDatesRec[i][0]&&s.blackDatesRec[i][0]!==a||-1!==s.blackDatesRec[i][1]&&s.blackDatesRec[i][1]!==n||-1!==s.blackDatesRec[i][2]&&s.blackDatesRec[i][2]!==o||(r.dateOK=!1);s.blackDates!==!1&&e.inArray(d.iso(),s.blackDates)>-1&&(r.dateOK=!1),s.blackDays!==!1&&e.inArray(d.getDay(),s.blackDays)>-1&&(r.dateOK=!1),s.whiteDates!==!1&&e.inArray(d.iso(),s.whiteDates)>-1&&(r.dateOK=!0)}r.theDate=d},_grabLabel:function(){var t,a,n=this,o=this.options,i=!1;return"undefined"==typeof o.overrideDialogLabel?(t=n.d.input.attr("placeholder"),a=n.d.input.attr("title"),"undefined"!=typeof t?t:"undefined"!=typeof a?a:(i=e(document).find("label[for='"+n.d.input.attr("id")+"']").text(),""===i?!1:i)):o.overrideDialogLabel},_stdBtn:{clear:function(){var t=this,a=this.options;return e("<a href='#' role='button'>"+t.__("clearButton")+"</a>").addClass("ui-btn ui-btn-"+a.theme+" ui-icon-delete ui-btn-icon-left ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t.d.input.val(""),t._t({method:"clear"}),t._t({method:"close"})})},close:function(t){var a=this,n=this.options;return e("<a href='#' role='button'>"+t+"</a>").addClass("ui-btn ui-btn-"+n.themeSetButton+" ui-icon-check ui-btn-icon-left ui-shadow ui-corner-all"+(a.dateOK===!0?"":" ui-state-disabled")).on(n.clickEventAlt,function(e){e.preventDefault(),a.dateOK===!0&&(a._t({method:"set",value:a._formatter(a.__fmt(),a.theDate),date:a.theDate}),a._t({method:"close"}))})}},_makeEl:function(e,t){var a=!1,n=!1;if(n=e.clone(),"undefined"!=typeof t.attr)for(a in t.attr)t.attr.hasOwnProperty(a)&&n.data(a,t.attr[a]);return n},_getLongOptions:function(e){var t,a,n={},o="datebox",i=7;for(t in e.data())t.substr(0,i)===o&&t.length>i&&(a=t.substr(i),a=a.charAt(0).toLowerCase()+a.slice(1),"options"!==a&&(n[a]=e.data(t)));return n},disable:function(){var e=this;e.d.input.attr("disabled",!0),e.d.wrap.addClass("ui-state-disabled").blur(),e.disabled=!0,e.d.mainWrap.addClass("ui-state-disabled"),e._t({method:"disable"})},enable:function(){var e=this;e.d.input.attr("disabled",!1),e.d.wrap.removeClass("ui-state-disabled"),e.disabled=!1,e.d.mainWrap.removeClass("ui-state-disabled"),e._t({method:"enable"})},_setOption:function(){e.Widget.prototype._setOption.apply(this,arguments),this.refresh()},getTheDate:function(){return this.theDate},getLastDur:function(){return this.lastDuration},setTheDate:function(e){this.theDate="object"==typeof e?e:this._makeDate(e),this.refresh(),this._t({method:"doset"})},parseDate:function(e,t){var a,n=this;return n.fmtOver=e,a=n._makeDate(t),n.fmtOver=!1,a},callFormat:function(e,t){return this._formatter(e,t)},getOption:function(e){var t=this.__(e);return"undefined"!=typeof t?t:this.options[e]},_t:function(e){this.d.input.trigger("datebox",e)}})}(jQuery),function(e){e.extend(e.mobile.datebox.prototype.options,{themeDateToday:"b",themeDayHigh:"b",themeDatePick:"b",themeDateHigh:"b",themeDateHighAlt:"b",themeDateHighRec:"b",themeDate:"a",calNextMonthIcon:"plus",calPrevMonthIcon:"minus",calHighToday:!0,calHighPick:!0,calShowDays:!0,calOnlyMonth:!1,calWeekMode:!1,calWeekModeDay:1,calControlGroup:!1,calShowWeek:!1,calUsePickers:!1,calNoHeader:!1,calFormatter:!1,calYearPickMin:-6,calYearPickMax:6,useTodayButton:!1,useTomorrowButton:!1,useCollapsedBut:!1,highDays:!1,highDates:!1,highDatesRec:!1,highDatesAlt:!1,enableDates:!1,calDateList:!1,calShowDateList:!1}),e.extend(e.mobile.datebox.prototype,{_cal_gen:function(e,t,a,n,o){var i=0,r=0,s=1,d=1,u=[],l=[],c=!1;for(i=0;5>=i;i++)if(c===!1){for(l=[],r=0;6>=r;r++)0===i&&e>r?l.push(n===!0?[t+(r-e)+1,o-1]:!1):i>3&&s>a?(n===!0?(l.push([d,o+1]),d++):l.push(!1),c=!0):(l.push([s,o]),s++,s>a&&(c=!0));u.push(l)}return u},_cal_check:function(t,a,n,o,i){var r,s=this,d=this.options,u=i.x,l=i.i,c=i.t,p=i.p,h=new this._date(a,n,o,0,0,0,0).getDay(),f=d.blackDatesRec,m=d.highDatesRec,b={ok:!0,iso:a+"-"+s._zPad(n+1)+"-"+s._zPad(o),theme:d.themeDate,recok:!0,rectheme:!1};if(b.comp=parseInt(b.iso.replace(/-/g,""),10),f!==!1)for(r=0;r<f.length;r++)-1!==f[r][0]&&f[r][0]!==a||-1!==f[r][1]&&f[r][1]!==n||-1!==f[r][2]&&f[r][2]!==o||(b.ok=!1);if(e.isArray(d.enableDates)&&e.inArray(b.iso,d.enableDates)<0?b.ok=!1:t&&(b.recok!==!0||d.afterToday&&c.comp()>b.comp||d.beforeToday&&c.comp()<b.comp||d.notToday&&c.comp()===b.comp||d.maxDays!==!1&&u.comp()<b.comp||d.minDays!==!1&&l.comp()>b.comp||e.isArray(d.blackDays)&&e.inArray(h,d.blackDays)>-1||e.isArray(d.blackDates)&&e.inArray(b.iso,d.blackDates)>-1)&&(b.ok=!1),e.isArray(d.whiteDates)&&e.inArray(b.iso,d.whiteDates)>-1&&(b.ok=!0),b.ok){if(m!==!1)for(r=0;r<m.length;r++)-1!==m[r][0]&&m[r][0]!==a||-1!==m[r][1]&&m[r][1]!==n||-1!==m[r][2]&&m[r][2]!==o||(b.rectheme=!0);!d.calHighPick||o!==p||""===s.d.input.val()&&d.defaultValue===!1?d.calHighToday&&b.comp===c.comp()?b.theme=d.themeDateToday:e.isArray(d.highDatesAlt)&&e.inArray(b.iso,d.highDatesAlt)>-1?b.theme=d.themeDateHighAlt:e.isArray(d.highDates)&&e.inArray(b.iso,d.highDates)>-1?b.theme=d.themeDateHigh:e.isArray(d.highDays)&&e.inArray(h,d.highDays)>-1?b.theme=d.themeDayHigh:e.isArray(d.highDatesRec)&&b.rectheme===!0&&(b.theme=d.themeDateHighRec):b.theme=d.themeDatePick}return b}}),e.extend(e.mobile.datebox.prototype._build,{calbox:function(){var t,a,n,o,i,r,s,d,u,l,c,p,h,f,m,b,_=this,g=this.options,D=g.calDateList,y="ui-datebox-",v=_.theDate,x=!1,k={},T=_.initDate.copy(),M=_.initDate.copy(),w=(v.copy([0],[0,0,1]).getDay()-_.__("calStartDay")+7)%7,L=v.get(1),H=v.get(0),C=v.getArray(),O=""===_.d.input.val()?_._startOffset(_._makeDate(_.d.input.val())):_._makeDate(_.d.input.val()),S=-1,I=new _._date,A=I.getArray(),F=v.copy([0],[0,0,1]).adj(2,-1*w+(0===_.__("calStartDay")?1:0)).getDWeek(4),B=0,P=!1,W=!1,Y=32-_.theDate.copy([0],[0,0,32,13]).getDate(),E=32-_.theDate.copy([0,-1],[0,0,32,13]).getDate(),z=g.afterToday||g.beforeToday||g.notToday||g.maxDays||g.minDays||g.blackDays||g.blackDates?!0:!1;if("boolean"!=typeof _.d.intHTML&&(_.d.intHTML.remove(),_.d.intHTML=null),_.d.headerText=_._grabLabel()!==!1?_._grabLabel():_.__("titleDateDialogLabel"),_.d.intHTML=e("<span>"),e("<div class='"+y+"gridheader'><div class='"+y+"gridlabel'><h4>"+_._formatter(_.__("calHeaderFormat"),_.theDate)+"</h4></div></div>").appendTo(_.d.intHTML),e("<div class='"+y+"gridplus"+(_.__("isRTL")?"-rtl":"")+"'><a href='#'>"+_.__("nextMonth")+"</a></div>").prependTo(_.d.intHTML.find("."+y+"gridheader")).find("a").addClass("ui-btn-inline ui-link ui-btn ui-btn-"+g.themeDate+" ui-icon-"+g.calNextMonthIcon+" ui-btn-icon-notext ui-shadow ui-corner-all").on(g.clickEventAlt,function(e){e.preventDefault(),_.calNext&&(_.theDate.getDate()>28&&_.theDate.setDate(1),_._offset("m",1))}),e("<div class='"+y+"gridminus"+(_.__("isRTL")?"-rtl":"")+"'><a href='#'>"+_.__("prevMonth")+"</a></div>").prependTo(_.d.intHTML.find("."+y+"gridheader")).find("a").addClass("ui-btn-inline ui-link ui-btn ui-btn-"+g.themeDate+" ui-icon-"+g.calPrevMonthIcon+" ui-btn-icon-notext ui-shadow ui-corner-all").on(g.clickEventAlt,function(e){e.preventDefault(),_.calPrev&&(_.theDate.getDate()>28&&_.theDate.setDate(1),_._offset("m",-1))}),g.calNoHeader&&(g.calUsePickersIcons?_.d.intHTML.find("."+y+"gridlabel").hide():_.d.intHTML.find("."+y+"gridheader").remove()),_.calNext=!0,_.calPrev=!0,Math.floor(I.comp()/100)===Math.floor(v.comp()/100)&&(P=!0),Math.floor(I.comp()/1e4)===Math.floor(v.comp()/1e4)&&(W=!0),O.comp()===v.comp()&&(S=O.get(2)),g.afterToday&&(P||W&&A[1]>=C[1])&&(_.calPrev=!1),g.beforeToday&&(P||W&&A[1]<=C[1])&&(_.calNext=!1),g.minDays!==!1&&(T.adj(2,-1*g.minDays),t=T.getArray(),C[0]===t[0]&&C[1]<=t[1]&&(_.calPrev=!1)),g.maxDays!==!1&&(M.adj(2,g.maxDays),t=T.getArray(),C[0]===t[0]&&C[1]>=t[1]&&(_.calNext=!1)),g.calUsePickers){for(a=e("<div>"),g.calNoHeader&&g.calUsePickersIcons&&a.addClass("ui-datebox-pickicon"),a.i=e("<fieldset>").appendTo(a),a.a=e("<select>").appendTo(a.i),a.b=e("<select>").appendTo(a.i),p=0;11>=p;p++)a.a.append(e("<option value='"+p+"'"+(L===p?" selected='selected'":"")+">"+_.__("monthsOfYear")[p]+"</option>"));for(h=g.calYearPickMin<1?H+g.calYearPickMin:g.calYearPickMin<1800?H-g.calYearPickMin:"NOW"===g.calYearPickMin?A[0]:g.calYearPickMin,f=g.calYearPickMax<1800?H+g.calYearPickMax:"NOW"===g.calYearPickMax?A[0]:g.calYearPickMax,p=h;f>=p;p++)a.b.append(e("<option value='"+p+"'"+(H===p?" selected='selected'":"")+">"+p+"</option>"));a.a.on("change",function(){_.theDate.setD(1,e(this).val()),_.theDate.get(1)!==parseInt(e(this).val(),10)&&_.theDate.setD(2,0),_.refresh()}),a.b.on("change",function(){_.theDate.setD(0,e(this).val()),_.theDate.get(1)!==parseInt(a.a.val(),10)&&_.theDate.setD(2,0),_.refresh()}),a.i.controlgroup({mini:!0,type:"horizontal"}),a.i.find("select").selectmenu({nativeMenu:!0}),a.i.find(".ui-controlgroup-controls").css({marginRight:"auto",marginLeft:"auto",width:"100%",display:"table"}),a.i.find(".ui-select").first().css({width:"60%"}).end().last().css({width:"40%"}),g.calNoHeader&&g.calUsePickersIcons&&a.i.css({padding:"0 10px 5px 10px"}),a.appendTo(_.d.intHTML)}if(n=e("<div class='"+y+"grid'>").appendTo(_.d.intHTML),g.calShowDays)for(_._cal_days=_.__("daysOfWeekShort").concat(_.__("daysOfWeekShort")),i=e("<div>",{"class":y+"gridrow"}).appendTo(n),g.calControlGroup&&i.addClass(y+"gridrow-last"),_.__("isRTL")===!0&&i.css("direction","rtl"),g.calShowWeek&&e("<div>").addClass(y+"griddate "+y+"griddate-label").appendTo(i),p=0;6>=p;p++)e("<div>").text(_._cal_days[(p+_.__("calStartDay"))%7]).addClass(y+"griddate "+y+"griddate-label").appendTo(i);for(k={i:T,x:M,t:I,p:S},o=_._cal_gen(w,E,Y,!g.calOnlyMonth,v.get(1)),!e.isFunction(g.calFormatter)&&g.calFormatter!==!1&&e.isFunction(window[g.calFormatter])&&(g.calFormatter=window[g.calFormatter]),s=0,u=o.length;u>s;s++){for(c=e("<div>",{"class":y+"gridrow"}),_.__("isRTL")&&c.css("direction","rtl"),g.calShowWeek&&(e("<div>",{"class":y+"griddate "+y+"griddate-empty"}).text("W"+F).css(g.calControlGroup?{"float":"left"}:{}).appendTo(c),F++,F>52&&"undefined"!=typeof o[s+1]&&(F=new _._date(C[0],C[1],0===_.__("calStartDay")?o[s+1][1][0]:o[s+1][0][0],0,0,0,0).getDWeek(4))),d=0,l=o[s].length;l>d;d++)g.calWeekMode&&(B=o[s][g.calWeekModeDay][0]),"boolean"==typeof o[s][d]?e("<div>",{"class":y+"griddate "+y+"griddate-empty"}).appendTo(c):(x=_._cal_check(z,C[0],o[s][d][1],o[s][d][0],k),o[s][d][0]&&(e.isFunction(g.calFormatter)?(b={Year:o[s][d][1]>11?H+1:o[s][d][1]<0?H-1:H,Month:12===o[s][d][1]?0:-1===o[s][d][1]?11:o[s][d][1],Date:o[s][d][0]},b.ISO=b.Year+"-"+_._zPad(b.Month+1)+"-"+_._zPad(b.Date),b.Comp=parseInt(b.ISO.replace(/-/g,""),10),t=g.calFormatter(b),m="object"!=typeof t?{text:t,"class":""}:{text:t.text,"class":t.class}):m={text:o[s][d][0],"class":""},e("<div>").html(m.text).addClass(y+"griddate ui-corner-all ui-btn").addClass(L===o[s][d][1]?"ui-btn-"+x.theme+(x.ok?"":" ui-state-disabled"):y+"griddate-empty").addClass(m.class).css(L===o[s][d][1]||g.calOnlyMonth?{}:{cursor:"pointer"}).data("date",g.calWeekMode?B:o[s][d][0]).data("enabled",x.ok).data("month",o[s][g.calWeekMode?g.calWeekModeDay:d][1]).appendTo(c)));
g.calControlGroup&&c.controlgroup({type:"horizontal"}),s===u-1&&c.addClass(y+"gridrow-last"),c.appendTo(n)}if(g.calShowWeek&&n.find("."+y+"griddate").addClass(y+"griddate-week"),g.calShowDateList&&D!==!1){for(r=e("<div>"),r.a=e("<select name='pickdate'></select>").appendTo(r),r.a.append("<option value='false' selected='selected'>"+_.__("calDateListLabel")+"</option>"),p=0;p<D.length;p++)r.a.append(e("<option value='"+D[p][0]+"'>"+D[p][1]+"</option>"));r.a.on("change",function(){t=e(this).val().split("-"),_.theDate=new _._date(t[0],t[1]-1,t[2],0,0,0,0),_._t({method:"doset"})}),r.find("select").selectmenu({mini:!0,nativeMenu:!0}),r.appendTo(n)}(g.useTodayButton||g.useTomorrowButton||g.useClearButton)&&(c=e("<div>",{"class":y+"controls"}),g.useTodayButton&&e("<a href='#' role='button'>"+_.__("calTodayButtonLabel")+"</a>").appendTo(c).addClass("ui-btn ui-btn-"+g.theme+" ui-icon-navigation ui-btn-icon-left ui-shadow ui-corner-all").on(g.clickEvent,function(e){e.preventDefault(),_.theDate=_._pa([0,0,0],new _._date),_._t({method:"doset"})}),g.useTomorrowButton&&e("<a href='#' role='button'>"+_.__("calTomorrowButtonLabel")+"</a>").appendTo(c).addClass("ui-btn ui-btn-"+g.theme+" ui-icon-navigation ui-btn-icon-left ui-shadow ui-corner-all").on(g.clickEvent,function(e){e.preventDefault(),_.theDate=_._pa([0,0,0],new _._date).adj(2,1),_._t({method:"doset"})}),g.useClearButton&&c.append(_._stdBtn.clear.apply(_)),g.useCollapsedBut?(c.controlgroup({type:"horizontal"}),c.addClass("ui-datebox-collapse")):c.controlgroup(),c.appendTo(n)),_.d.intHTML.on(g.clickEventAlt,"div."+y+"griddate",function(t){t.preventDefault(),e(this).data("enabled")&&(_.theDate.setD(2,1).setD(1,e(this).jqmData("month")).setD(2,e(this).data("date")),_._t({method:"set",value:_._formatter(_.__fmt(),_.theDate),date:_.theDate}),_._t({method:"close"}))}),_.d.intHTML.on("swipeleft",function(){_.calNext&&_._offset("m",1)}).on("swiperight",function(){_.calPrev&&_._offset("m",-1)}),_.wheelExists&&_.d.intHTML.on("mousewheel",function(e,t){e.preventDefault(),t>0&&_.calNext&&(_.theDate.setD(2,1),_._offset("m",1)),0>t&&_.calPrev&&(_.theDate.setD(2,1),_._offset("m",-1))})}})}(jQuery),function(e){e.extend(e.mobile.datebox.prototype.options,{themeButton:"a",themeInput:"a",useSetButton:!0,validHours:!1,repButton:!0,durationStep:1,durationSteppers:{d:1,h:1,i:1,s:1}}),e.extend(e.mobile.datebox.prototype,{_dbox_run:function(){var e=this,t=this.drag,a=150;t.cnt>10&&(a=100),t.cnt>30&&(a=50),t.cnt>60&&(a=20),t.cnt>120&&(a=10),t.cnt>240&&(a=3),t.didRun=!0,t.cnt++,e._offset(t.target[0],t.target[1],!1),e._dbox_run_update(),e.runButton=setTimeout(function(){e._dbox_run()},a)},_dbox_fixstep:function(t){var a=this.options.durationSteppers,n=this.options.durationStep;e.inArray("s",t)>-1&&(a.i=1,a.s=n),e.inArray("i",t)>-1&&(a.h=1,a.s=n),e.inArray("h",t)>-1&&(a.d=1,a.s=n)},_dbox_run_update:function(t){var a=this,n=this.options,o=a.theDate.getTime()-a.initDate.getTime(),i="durationbox"===n.mode?!0:!1,r=a._dur(0>o?0:o);0>o&&(a.lastDuration=0,i&&a.theDate.setTime(a.initDate.getTime())),t!==!0&&i!==!0&&(a._check(),"datebox"===n.mode&&a.d.intHTML.find(".ui-datebox-header").find("h4").text(a._formatter(a.__("headerFormat"),a.theDate)),n.useSetButton&&(a.dateOK===!1?a.setBut.addClass("ui-state-disabled"):a.setBut.removeClass("ui-state-disabled"))),a.d.divIn.find("input").each(function(){switch(e(this).data("field")){case"y":e(this).val(a.theDate.get(0));break;case"m":e(this).val(a.theDate.get(1)+1);break;case"d":e(this).val(i?r[0]:a.theDate.get(2));break;case"h":e(this).val(i?r[1]:12===a.__("timeFormat")?a.theDate.get12hr():a.theDate.get(3));break;case"i":e(this).val(i?r[2]:a._zPad(a.theDate.get(4)));break;case"M":e(this).val(a.__("monthsOfYearShort")[a.theDate.get(1)]);break;case"a":e(this).val(a.__("meridiem")[a.theDate.get(3)>11?1:0]);break;case"s":e(this).val(r[3])}}),a.__("useArabicIndic")===!0&&a._doIndic()},_dbox_vhour:function(t){var a,n=this,o=this.options,i=[25,0],r=[25,0];return o.validHours===!1?!0:e.inArray(n.theDate.getHours(),o.validHours)>-1?!0:(a=n.theDate.getHours(),e.each(o.validHours,function(){(this>a?1:-1)===t?i[0]>Math.abs(this-a)&&(i=[Math.abs(this-a),parseInt(this,10)]):r[0]>Math.abs(this-a)&&(r=[Math.abs(this-a),parseInt(this,10)])}),void n.theDate.setHours(0!==i[1]?i[1]:r[1]))},_dbox_enter:function(t){var a,n=this,o=0;if("M"===t.data("field")&&(a=e.inArray(t.val(),n.__("monthsOfYearShort")),a>-1&&n.theDate.setMonth(a)),""!==t.val()&&0===t.val().toString().search(/^[0-9]+$/))switch(t.data("field")){case"y":n.theDate.setD(0,parseInt(t.val(),10));break;case"m":n.theDate.setD(1,parseInt(t.val(),10)-1);break;case"d":n.theDate.setD(2,parseInt(t.val(),10)),o+=86400*parseInt(t.val(),10);break;case"h":n.theDate.setD(3,parseInt(t.val(),10)),o+=3600*parseInt(t.val(),10);break;case"i":n.theDate.setD(4,parseInt(t.val(),10)),o+=60*parseInt(t.val(),10);break;case"s":o+=parseInt(t.val(),10)}"durationbox"===this.options.mode&&n.theDate.setTime(n.initDate.getTime()+1e3*o),n.refresh()}}),e.extend(e.mobile.datebox.prototype._build,{timebox:function(){this._build.datebox.apply(this,[])},durationbox:function(){this._build.datebox.apply(this,[])},datebox:function(){var t,a,n,o,i=this,r=this.drag,s=this.options,d="durationbox"===s.mode?!0:!1,u=-2,l=["d","h","i","s"],c="ui-datebox-",p=e("<div>"),h=e("<fieldset>"),f=p.clone(),m=h.clone(),b=p.clone(),_=e("<div><input type='text'></div>").addClass("ui-input-text ui-body-"+s.themeInput+" ui-corner-all ui-mini ui-shadow-inset"),g=e("<div></div>"),D="ui-btn-inline ui-link ui-btn ui-btn-"+s.themeButton+" ui-btn-icon-notext ui-shadow ui-corner-all";for("boolean"!=typeof i.d.intHTML&&i.d.intHTML.empty().remove(),i.d.headerText=i._grabLabel()!==!1?i._grabLabel():i.__("datebox"===s.mode?"titleDateDialogLabel":"titleTimeDialogLabel"),i.d.intHTML=e("<span>"),i.fldOrder=i.__("datebox"===s.mode?"dateFieldOrder":d?"durationOrder":"timeFieldOrder"),d?(i.dateOK=!0,i._dbox_fixstep(i.fldOrder)):(i._check(),i._minStepFix(),i._dbox_vhour("undefined"!=typeof i._dbox_delta?i._dbox_delta:1)),"datebox"===s.mode&&e("<div class='"+c+"header'><h4>"+i._formatter(i.__("headerFormat"),i.theDate)+"</h4></div>").appendTo(i.d.intHTML),a=0;a<i.fldOrder.length;a++)o=i._gridblk.b[a],t=d?s.durationSteppers[i.fldOrder[a]]:"i"===i.fldOrder[a]?s.minuteStep:1,("a"!==i.fldOrder[a]||12===i.__("timeFormat"))&&(e("<div>").append(d?"<label>"+i.__("durationLabel")[e.inArray(i.fldOrder[a],l)]+"</label>":"").addClass("ui-block-"+o).appendTo(b),e("<div>").append(i._makeEl(_,{attr:{field:i.fldOrder[a],amount:t}})).addClass("ui-block-"+o).appendTo(f).find("input").data({field:i.fldOrder[a],amount:t}),i._makeEl(g,{attr:{field:i.fldOrder[a],amount:t}}).addClass(c+"cbut ui-block-"+o+" ui-icon-plus "+D).appendTo(h).prepend(d?"<label>"+i.__("durationLabel")[a]+"</label>":""),i._makeEl(g,{attr:{field:i.fldOrder[a],amount:-1*t}}).addClass(c+"cbut ui-block-"+o+" ui-icon-minus "+D).appendTo(m),u++);d&&b.addClass("ui-datebox-dboxlab ui-grid-"+i._gridblk.b[u]).appendTo(i.d.intHTML),h.addClass("ui-grid-"+i._gridblk.b[u]).appendTo(i.d.intHTML),f.addClass("ui-datebox-dboxin ui-grid-"+i._gridblk.b[u]).appendTo(i.d.intHTML),m.addClass("ui-grid-"+i._gridblk.b[u]).appendTo(i.d.intHTML),i.d.divIn=f,i._dbox_run_update(!0),i.dateOK!==!0?f.find("input").addClass("ui-state-disable"):f.find(".ui-state-disable").removeClass("ui-state-disable"),(s.useSetButton||s.useClearButton)&&(n=e("<div>",{"class":c+"controls"}),s.useSetButton&&(i.setBut=i._stdBtn.close.apply(i,[i.__("datebox"===s.mode?"setDateButtonLabel":d?"setDurationButtonLabel":"setTimeButtonLabel")]),i.setBut.appendTo(n)),s.useClearButton&&n.append(i._stdBtn.clear.apply(i)),s.useCollapsedBut?(n.controlgroup({type:"horizontal"}),n.addClass("ui-datebox-collapse")):n.controlgroup(),n.appendTo(i.d.intHTML)),s.repButton||i.d.intHTML.on(s.clickEvent,"."+c+"cbut",function(t){f.find(":focus").blur(),t.preventDefault(),i._dbox_delta=e(this).data("amount")>1?1:-1,i._offset(e(this).data("field"),e(this).data("amount"))}),f.on("change","input",function(){i._dbox_enter(e(this))}),i.wheelExists&&f.on("mousewheel","input",function(t,a){t.preventDefault(),i._dbox_delta=0>a?-1:1,i._offset(e(this).data("field"),(0>a?-1:1)*e(this).data("amount"))}),s.repButton&&(i.d.intHTML.on(r.eStart,"."+c+"cbut",function(){f.find(":focus").blur(),o=[e(this).data("field"),e(this).data("amount")],r.move=!0,r.cnt=0,i._dbox_delta=e(this).data("amount")>1?1:-1,i._offset(o[0],o[1],!1),i._dbox_run_update(),i.runButton||(r.target=o,i.runButton=setTimeout(function(){i._dbox_run()},500))}),i.d.intHTML.on(r.eEndA,"."+c+"cbut",function(e){r.move&&(e.preventDefault(),clearTimeout(i.runButton),i.runButton=!1,r.move=!1)}))}})}(jQuery),function(e){e.extend(e.mobile.datebox.prototype.options,{themeDatePick:"b",themeDate:"a",useSetButton:!0,validHours:!1,flen:{y:15,m:12,d:20,h:12,i:15},durationStep:1,durationSteppers:{d:1,h:1,i:1,s:1}}),e.extend(e.mobile.datebox.prototype,{_fbox_pos:function(){var t,a,n,o,i=this,r=this.d.intHTML.find(".ui-datebox-flipcontent").innerHeight();i.d.intHTML.find(".ui-datebox-flipcenter").each(function(){a=e(this),n=a.innerHeight(),a.css("top",-1*(r/2-n/2-3))}),i.d.intHTML.find("ul").each(function(){a=e(this),r=a.parent().innerHeight(),n=a.find("li").first(),o=a.find("li").last().offset().top-a.find("li").first().offset().top,t=-1*((o-r)/2+n.outerHeight()),n.css("marginTop",t)})},_fbox_fixstep:function(t){var a=this.options.durationSteppers,n=this.options.durationStep;e.inArray("h",t)>-1&&(a.d=1,a.h=n),e.inArray("i",t)>-1&&(a.h=1,a.i=n),e.inArray("s",t)>-1&&(a.i=1,a.s=n)},_fbox_series:function(e,t,a,n){for(var o,i,r=this.options,s="h"===a?24:60,d=[[e.toString(),e]],u=1;t>=u;u++)o=e+u*r.durationSteppers[a],i=e-u*r.durationSteppers[a],d.unshift([o.toString(),o]),d.push(i>-1?[i.toString(),i]:n?[(s+i).toString(),i]:["",-1]);return d},_fbox_mktxt:{y:function(e){return this.theDate.get(0)+e},m:function(e){var t=this.theDate.copy([0],[0,0,1]).adj(1,e);return this.__("monthsOfYearShort")[t.get(1)]},d:function(e){return this.theDate.copy([0,0,e]).get(2)},h:function(e){var t=this.theDate.copy([0,0,0,e]);return 12===this.__("timeFormat")?t.get12hr():t.get(3)},i:function(e){return this._zPad(this.theDate.copy([0,0,0,0,e]).get(4))}}}),e.extend(e.mobile.datebox.prototype._build,{timeflipbox:function(){this._build.flipbox.apply(this)},durationflipbox:function(){this._build.flipbox.apply(this)},flipbox:function(){var t,a,n,o,i,r,s,d,u=this,l=this.options,c=this.drag,p={},h=["d","h","i","s"],f="durationflipbox"===l.mode?!0:!1,m="ui-datebox-",b=e("<div class='ui-overlay-shadow'><ul></ul></div>"),_=e("<div>",{"class":m+"flipcontent"}),g=u.theDate.getTime()-u.initDate.getTime(),D=u._dur(0>g?0:g);if(0>g&&(u.lastDuration=0,f&&u.theDate.setTime(u.initDate.getTime())),"boolean"!=typeof u.d.intHTML?u.d.intHTML.empty().remove():u.d.input.on("datebox",function(e,t){"postrefresh"===t.method&&u._fbox_pos()}),u.d.headerText=u._grabLabel()!==!1?u._grabLabel():u.__("flipbox"===l.mode?"titleDateDialogLabel":"titleTimeDialogLabel"),u.d.intHTML=e("<span>"),e(document).one("popupafteropen",function(){u._fbox_pos()}),u.fldOrder=u.__("flipbox"===l.mode?"dateFieldOrder":f?"durationOrder":"timeFieldOrder"),f||(u._check(),u._minStepFix()),"flipbox"===l.mode&&e("<div class='"+m+"header'><h4>"+u._formatter(u.__("headerFormat"),u.theDate)+"</h4></div>").appendTo(u.d.intHTML),f){for(u._fbox_fixstep(u.fldOrder),o=e("<div class='"+m+"header ui-grid-"+u._gridblk.g[u.fldOrder.length]+"'></div>"),a=0;a<u.fldOrder.length;a++)e("<div class='"+m+"fliplab ui-block-"+u._gridblk.b[a]+"'>"+u.__("durationLabel")[e.inArray(u.fldOrder[a],h)]+"</div>").appendTo(o);for(o.appendTo(u.d.intHTML),u.dateOK=!0,p.d=u._fbox_series(D[0],16,"d",!1),p.h=u._fbox_series(D[1],16,"h",D[0]>0),p.i=u._fbox_series(D[2],20,"i",D[0]>0||D[1]>0),p.s=u._fbox_series(D[3],20,"s",D[0]>0||D[1]>0||D[2]>0),_.addClass(m+"flipcontentd"),a=0;a<u.fldOrder.length;a++){r=u.fldOrder[a],s=D[e.inArray(r,h)],n=u._makeEl(b,{attr:{field:r,amount:l.durationSteppers[r]}}),i=n.find("ul");for(t in p[r])e("<li><span>"+p[r][t][0]+"</span></li>").addClass("ui-body-"+(p[r][t][1]!==s?l.themeDate:l.themeDatePick)).appendTo(i);n.appendTo(_)}}for(a=0;a<u.fldOrder.length&&!f;a++){if(s=u.fldOrder[a],n=u._makeEl(b,{attr:{field:s,amount:1}}),i=n.find("ul"),"function"==typeof u._fbox_mktxt[s]){for(t=-1*l.flen[s];t<l.flen[s]+1;t++)e("<li class='ui-body-"+(0!==t?l.themeDate:l.themeDatePick)+"'><span>"+u._fbox_mktxt[s].apply(u,[t])+"</span></li>").appendTo(i);n.appendTo(_)}if("a"===s&&12===u.__("timeFormat")){for(d=e("<li class='ui-body-"+l.themeDate+"'><span></span></li>"),o=u.theDate.get(3)>11?[l.themeDate,l.themeDatePick,2,5]:[l.themeDatePick,l.themeDate,2,3],t=-1*o[2];t<o[3];t++)0>t||t>1?d.clone().appendTo(i):e("<li>",{"class":"ui-body-"+o[t]}).html("<span>"+u.__("meridiem")[t]+"</span>").appendTo(i);n.appendTo(_)}}u.d.intHTML.append(_),e("<div>",{"class":m+"flipcenter ui-overlay-shadow"}).css("pointerEvents","none").appendTo(u.d.intHTML),(l.useSetButton||l.useClearButton)&&(a=e("<div>",{"class":m+"controls"}),l.useSetButton&&a.append(u._stdBtn.close.apply(u,[u.__("flipbox"===l.mode?"setDateButtonLabel":f?"setDurationButtonLabel":"setTimeButtonLabel")])),l.useClearButton&&a.append(u._stdBtn.clear.apply(u)),l.useCollapsedBut?(a.controlgroup({type:"horizontal"}),a.addClass("ui-datebox-collapse")):a.controlgroup(),a.appendTo(u.d.intHTML)),u.wheelExists&&u.d.intHTML.on("mousewheel",".ui-overlay-shadow",function(t,a){t.preventDefault(),u._offset(e(this).data("field"),(0>a?-1:1)*e(this).data("amount"))}),u.d.intHTML.on(c.eStart,"ul",function(t,a){c.move||("undefined"!=typeof a&&(t=a),c.move=!0,c.target=e(this).find("li").first(),c.pos=parseInt(c.target.css("marginTop").replace(/px/i,""),10),c.start=u.touch?t.originalEvent.changedTouches[0].pageY:t.pageY,c.end=!1,c.direc=f?-1:1,t.stopPropagation(),t.preventDefault())})}}),e.extend(e.mobile.datebox.prototype._drag,{timeflipbox:function(){this._drag.flipbox.apply(this)},durationflipbox:function(){this._drag.flipbox.apply(this)},flipbox:function(){var t=this,a=this.options,n=this.drag;e(document).on(n.eMove,function(e){return n.move&&"flipbox"===a.mode.slice(-7)?(n.end=t.touch?e.originalEvent.changedTouches[0].pageY:e.pageY,n.target.css("marginTop",n.pos+n.end-n.start+"px"),e.preventDefault(),e.stopPropagation(),!1):void 0}),e(document).on(n.eEnd,function(e){n.move&&"flipbox"===a.mode.slice(-7)&&(n.move=!1,n.end!==!1&&(e.preventDefault(),e.stopPropagation(),n.tmp=n.target.parent().parent(),t._offset(n.tmp.data("field"),parseInt((n.start-n.end)/(n.target.outerHeight()-2),10)*n.tmp.data("amount")*n.direc)),n.start=!1,n.end=!1)})}})}(jQuery),function(e){e.extend(e.mobile.datebox.prototype.options,{themeDatePick:"b",themeDate:"a",useSetButton:!0,validHours:!1,slen:{y:9,m:14,d:16,h:16,i:30}}),e.extend(e.mobile.datebox.prototype,{_sbox_pos:function(){var t,a,n,o,i,r=this;r.d.intHTML.find("div.ui-datebox-sliderow-int").each(function(){a=e(this),o=a.parent().outerWidth(),t=a.outerWidth(),n=r.__("isRTL")?a.find("div").last():a.find("div").first(),i=a.find("div").size()*n.outerWidth(),t>0&&(i=t),n.css("marginLeft",(i-o)/2*-1)})},_sbox_mktxt:{y:function(e){return["slideyear",this.theDate.get(0)+e]},m:function(e){var t=this.theDate.copy([0],[0,0,1]).adj(1,e);return["slidemonth",this.__("monthsOfYearShort")[t.get(1)]]},d:function(e){var t=this.theDate.copy([0,0,e]);return["slideday",t.get(2)+"<br /><span class='ui-datebox-slidewday'>"+this.__("daysOfWeekShort")[t.getDay()]+"</span>"]},h:function(e){var t=this.theDate.copy([0,0,0,e]);return["slidehour",12===this.__("timeFormat")?this._formatter("%-I<span class='ui-datebox-slidewday'>%p</span>",t):t.get(3)]},i:function(e){return["slidemins",this._zPad(this.theDate.copy([0,0,0,0,e]).get(4))]}}}),e.extend(e.mobile.datebox.prototype._build,{slidebox:function(){var t,a,n,o,i,r,s=this,d=this.options,u=this.drag,l="ui-datebox-",c=e("<div class='"+l+"sliderow-int'></div>"),p=e("<div>"),h=e("<div>",{"class":l+"slide"});for("boolean"!=typeof s.d.intHTML?s.d.intHTML.remove().empty():s.d.input.on("datebox",function(e,t){"postrefresh"===t.method&&s._sbox_pos()}),s.d.headerText=s._grabLabel()!==!1?s._grabLabel():s.__("titleDateDialogLabel"),s.d.intHTML=e("<span class='"+l+"nopad'>"),s.fldOrder=s.__("slideFieldOrder"),s._check(),s._minStepFix(),e("<div class='"+l+"header'><h4>"+s._formatter(s.__("headerFormat"),s.theDate)+"</h4></div>").appendTo(s.d.intHTML),s.d.intHTML.append(h),a=0;a<s.fldOrder.length;a++)if(i=s.fldOrder[a],o=p.clone().addClass(l+"sliderow").data("rowtype",i),n=c.clone().data("rowtype",i).appendTo(o),s.__("isRTL")===!0&&n.css("direction","rtl"),"function"==typeof s._sbox_mktxt[i]){for(t=-1*d.slen[i];t<d.slen[i]+1;t++)r=s._sbox_mktxt[i].apply(s,[t]),e("<div>",{"class":l+"slidebox "+l+r[0]+" ui-btn ui-btn-"+(0===t?d.themeDatePick:d.themeDate)}).html(r[1]).data("offset",t).appendTo(n);o.appendTo(h)}(d.useSetButton||d.useClearButton)&&(a=e("<div>",{"class":l+"controls "+l+"repad"}),d.useSetButton&&a.append(s._stdBtn.close.apply(s,[s.__("setDateButtonLabel")])),d.useClearButton&&a.append(s._stdBtn.clear.apply(s)),d.useCollapsedBut?(a.controlgroup({type:"horizontal"}),a.addClass("ui-datebox-collapse")):a.controlgroup(),a.appendTo(s.d.intHTML)),s.wheelExists&&s.d.intHTML.on("mousewheel",".ui-datebox-sliderow-int",function(t,a){t.preventDefault(),s._offset(e(this).data("rowtype"),(0>a?-1:1)*("i"===e(this).data("rowtype")?d.minuteStep:1))}),s.d.intHTML.on(d.clickEvent,".ui-datebox-sliderow-int>div",function(t){t.preventDefault(),s._offset(e(this).parent().data("rowtype"),parseInt(e(this).data("offset"),10))}),s.d.intHTML.on(u.eStart,".ui-datebox-sliderow-int",function(t){u.move||(u.move=!0,u.target=e(this),u.pos=parseInt(u.target.css("marginLeft").replace(/px/i,""),10),u.start=s.touch?t.originalEvent.changedTouches[0].pageX:t.pageX,u.end=!1,t.stopPropagation(),t.preventDefault())})}}),e.extend(e.mobile.datebox.prototype._drag,{slidebox:function(){var t=this,a=this.options,n=this.drag;e(document).on(n.eMove,function(e){return n.move&&"slidebox"===a.mode?(n.end=t.touch?e.originalEvent.changedTouches[0].pageX:e.pageX,n.target.css("marginLeft",n.pos+n.end-n.start+"px"),e.preventDefault(),e.stopPropagation(),!1):void 0}),e(document).on(n.eEnd,function(e){n.move&&"slidebox"===a.mode&&(n.move=!1,n.end!==!1&&(e.preventDefault(),e.stopPropagation(),n.tmp=n.target.find("div").first(),t._offset(n.target.data("rowtype"),(t.__("isRTL")?-1:1)*parseInt((n.start-n.end)/n.tmp.innerWidth(),10)*("i"===n.target.data("rowtype")?a.minuteStep:1))),n.start=!1,n.end=!1)})}})}(jQuery),function(e){e.extend(e.mobile.datebox.prototype.options,{themeOptPick:"b",themeOpt:"a",useSetButton:!0,customData:[],customDefault:[0,0,0],customDataLen:25,customFormat:!1,customHead:!1,customfliplang:{customSet:"Looks Good"}}),e.extend(e.mobile.datebox.prototype,{_customflipDoSet:function(){var e=this,t=this.options;"undefined"==typeof e.customCurrent&&(e.customCurrent=this._makeDate(this.d.input.val())),e._t({method:"set",value:e._formatter(t.customFormat,e.customCurrent),custom:e.customCurrent})},_cubox_offset:function(e,t){var a,n=this,o=this.options;a=(n.customCurrent[e]+t)%o.customData[e].data.length,0>a&&(a=o.customData[e].data.length+a),n.customCurrent[e]=a,o.useImmediate&&n._t({method:"set",value:n._formatter(o.customFormat,n.customCurrent),custom:n.customCurrent}),n.refresh()},_cubox_arr:function(t,a){for(var n,o=t,i=this.options.customDataLen,r=t.slice(0,a),s=t.slice(a+1);r.length<i;)for(n=o.length;n>0;n--)r.unshift(o[n-1]);for(;r.length>i;)r.shift();for(;s.length<i;)for(n=0;n<o.length;n++)s.push(o[n]);return s.length=i,r.push(t[a]),e.merge(e.merge([],r),s)},_cubox_range:function(e){return e?this._cubox_range(e-1).concat(e):[]},_cubox_pos:function(){var t,a,n,o,i=this,r=this.d.intHTML.find(".ui-datebox-flipcontent").innerHeight();i.d.intHTML.find(".ui-datebox-flipcenter").each(function(){a=e(this),n=a.innerHeight(),a.css("top",-1*(r/2-n/2-3))}),i.d.intHTML.find("ul").each(function(){a=e(this),r=a.parent().innerHeight(),n=a.find("li").first(),o=a.find("li").last().offset().top-a.find("li").first().offset().top,t=-1*((o-r)/2+n.outerHeight()),n.css("marginTop",t)})}}),e.extend(e.mobile.datebox.prototype._parser,{customflip:function(t){var a,n,o,i,r=this.options,s=r.customFormat,d=[0,0,0,0,0,0];if("string"!=typeof s&&(s=""),s=s.replace(/%X([0-5a-f])/gi,function(e,t){switch(t){case"a":case"b":case"c":case"d":case"e":case"f":return"("+e+"|.+?)";case"0":case"1":case"2":case"3":case"4":case"5":return"("+e+"|[0-9]+)";default:return".+?"}}),s=new RegExp("^"+s+"$"),a=s.exec(t),n=s.exec(r.customFormat),null!==a)for(var u=1;u<a.length;u++)o=n[u].charAt(2),isNaN(parseInt(o))?(i=e.inArray(o,["a","b","c","d","e","f"]),d[i]=e.inArray(a[u],r.customData[i].data)):d[parseInt(o)-1]=parseInt(a[u]);return t.length<1||d.length<1?r.customDefault:d}}),e.extend(e.mobile.datebox.prototype._customformat,{customflip:function(t,a,n){var o,i=parseInt(t);return"number"!=typeof i||isNaN(i)?(o=e.inArray(t,["a","b","c","d","e","f"]),n.customData[o].data[a[o]]):a[t-1]}}),e.extend(e.mobile.datebox.prototype._build,{customflip:function(){var t,a,n,o,i,r,s=this,d=this.options,u="ui-datebox-",l=this._makeDate(this.d.input.val()),c=e("<div class='ui-overlay-shadow'><ul></ul></div>"),p=e("<div>",{"class":u+"flipcontent"});if("undefined"==typeof s.customCurrent&&(s.customCurrent=l),"string"==typeof d.customData&&"undefined"!=typeof window[d.customData]&&(d.customData=window[d.customData]),d.customFormat===!1){for(i=[],t=0;t<d.customData.length;t++)i.push("%X"+(t+1));d.customFormat=i.join(",")}for("boolean"!=typeof s.d.intHTML?s.d.intHTML.empty().remove():s.d.input.on("datebox",function(e,t){"postrefresh"===t.method&&s._cubox_pos()}),s.d.headerText=d.customHead!==!1?d.customHead:s._grabLabel()!==!1?s._grabLabel():"",s.d.intHTML=e("<span>"),e(document).one("popupafteropen",function(){s._fbox_pos()}),s.fldOrder=s._cubox_range(d.customData.length),i=e("<div class='"+u+"header'>"),d.customData.length>1&&i.addClass("ui-grid-"+[0,0,"a","b","c"][d.customData.length]),a=0;a<d.customData.length;a++)e("<div>").addClass(d.customData.length>1?"ui-block-"+["a","b","c","d"][a]:"").text(d.customData[a].name).css("textAlign","center").appendTo(i);for(i.appendTo(s.d.intHTML),s.d.intHTML.append(p),a=0;a<d.customData.length;a++){for(r=s._cubox_arr(d.customData[a].data,s.customCurrent[a]),n=s._makeEl(c,{attr:{field:a,amount:1}}),o=n.find("ul"),1===d.customData.length&&n.css("width","90%"),t=0;t<r.length;t++)i=t!==d.customDataLen?d.themeOpt:d.themeOptPick,console.log(t+" "+d.customDataLen),console.log(typeof t+" "+typeof d.customDataLen),e("<li>",{"class":"ui-body-"+i}).html("<span>"+r[t]+"</span>").appendTo(o);n.appendTo(p)}e("<div>",{"class":u+"flipcenter ui-overlay-shadow"}).css("pointerEvents","none").appendTo(s.d.intHTML),d.useSetButton&&(a=e("<div>",{"class":u+"controls"}),d.useSetButton&&e("<a href='#' role='button'>").appendTo(a).text(s.__("customSet")).addClass("ui-btn ui-btn-"+d.theme+" ui-icon-check ui-btn-icon-left ui-shadow ui-corner-all").on(d.clickEventAlt,function(e){e.preventDefault(),s._t({method:"set",value:s._formatter(d.customFormat,s.customCurrent),custom:s.customCurrent}),s._t({method:"close"})}),a.appendTo(s.d.intHTML)),s.wheelExists&&s.d.intHTML.on("mousewheel",".ui-overlay-shadow",function(t,a){t.preventDefault(),s._cubox_offset(e(this).data("field"),(0>a?1:-1)*e(this).data("amount"))}),s.d.intHTML.on(s.drag.eStart,"ul",function(t,a){s.drag.move||("undefined"!=typeof a&&(t=a),s.drag.move=!0,s.drag.target=e(this).find("li").first(),s.drag.pos=parseInt(s.drag.target.css("marginTop").replace(/px/i,""),10),s.drag.start=s.touch?t.originalEvent.changedTouches[0].pageY:t.pageY,s.drag.end=!1,t.stopPropagation(),t.preventDefault())})}}),e.extend(e.mobile.datebox.prototype._drag,{customflip:function(){var t=this,a=this.options,n=this.drag;e(document).on(n.eMove,function(e){return n.move&&"customflip"===a.mode?(n.end=t.touch?e.originalEvent.changedTouches[0].pageY:e.pageY,n.target.css("marginTop",n.pos+n.end-n.start+"px"),e.preventDefault(),e.stopPropagation(),!1):void 0}),e(document).on(n.eEnd,function(e){n.move&&"customflip"===a.mode&&(n.move=!1,n.end!==!1&&(e.preventDefault(),e.stopPropagation(),n.tmp=n.target.parent().parent(),t._cubox_offset(n.tmp.data("field"),parseInt((n.start-n.end)/n.target.innerHeight(),10)*n.tmp.data("amount"))),n.start=!1,n.end=!1)})}})}(jQuery),jQuery.extend(jQuery.mobile.datebox.prototype.options.lang,{en:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",calTodayButtonLabel:"Jump to Today",titleDateDialogLabel:"Choose Date",titleTimeDialogLabel:"Choose Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",timeFormat:12,headerFormat:"%A, %B %-d, %Y",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"%-m/%-d/%Y",useArabicIndic:!1,isRTL:!1,calStartDay:0,clearButton:"Clear",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%l:%M %p",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y",calTomorrowButtonLabel:"Jump to Tomorrow"}}),jQuery.extend(jQuery.mobile.datebox.prototype.options,{useLang:"en"});